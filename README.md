# –°–∏—Å—Ç–µ–º–∞ –æ—Ü—ñ–Ω–∫–∏ —Ä–∏–∑–∏–∫—ñ–≤ (Tarot AI Agent)

Tarot AI Agent - —Ü–µ —ñ–Ω–Ω–æ–≤–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ –±—ñ–∑–Ω–µ—Å-—Ä–∏–∑–∏–∫—ñ–≤ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω—å, —è–∫–∞ –ø–æ—î–¥–Ω—É—î —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω—É –º–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—é –¢–∞—Ä–æ –∑ —Å—É—á–∞—Å–Ω–∏–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—è–º–∏ —à—Ç—É—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É.

## –¶—ñ–ª—ñ —Ç–∞ –∑–∞–¥–∞—á—ñ

```mermaid
graph TD
    subgraph "üéØ –û—Å–Ω–æ–≤–Ω—ñ —Ü—ñ–ª—ñ"
        G1["–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –æ—Ü—ñ–Ω–∫–∏<br/>–±—ñ–∑–Ω–µ—Å-—Ä–∏–∑–∏–∫—ñ–≤"]
        G2["–ó–Ω–∏–∂–µ–Ω–Ω—è –≤–∞—Ä—Ç–æ—Å—Ç—ñ<br/>–ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω—å"]
        G3["–®–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–æ<br/>–µ–∫—Å–ø–µ—Ä—Ç–Ω–æ—ó –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏"]
    end

    subgraph "‚úÖ –ö–ª—é—á–æ–≤—ñ –∑–∞–¥–∞—á—ñ"
        T1["–ê–Ω–∞–ª—ñ–∑ –±—ñ–∑–Ω–µ—Å-—Å–∏—Ç—É–∞—Ü—ñ–π<br/>—á–µ—Ä–µ–∑ –ø—Ä–∏–∑–º—É –¢–∞—Ä–æ"]
        T2["–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö<br/>—ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ–π"]
        T3["–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –ø–æ—à—É–∫<br/>–≤ –±–∞–∑—ñ –∑–Ω–∞–Ω—å"]
        T4["–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —è–∫–æ—Å—Ç—ñ<br/>—Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ"]
    end

    subgraph "‚ö†Ô∏è –í–∏–∫–ª–∏–∫–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è"
        C1["–Ø–∫—ñ—Å—Ç—å —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ–π"]
        C2["–®–≤–∏–¥–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π"]
        C3["–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å"]
        C4["–ë–µ–∑–ø–µ–∫–∞ –¥–∞–Ω–∏—Ö"]

        S1["RAG + GPT-4"]
        S2["–í–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ + –∫–µ—à—É–≤–∞–Ω–Ω—è"]
        S3["–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞"]
        S4["–®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è + –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥"]

        C1 --> S1
        C2 --> S2
        C3 --> S3
        C4 --> S4
    end

    %% –¶—ñ–ª—ñ - —Å–∏–Ω—ñ–π
    style G1 fill:#bbdefb,stroke:#1976d2,stroke-width:3px,color:#000000
    style G2 fill:#bbdefb,stroke:#1976d2,stroke-width:3px,color:#000000
    style G3 fill:#bbdefb,stroke:#1976d2,stroke-width:3px,color:#000000

    %% –ó–∞–¥–∞—á—ñ - –∑–µ–ª–µ–Ω–∏–π
    style T1 fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px,color:#000000
    style T2 fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px,color:#000000
    style T3 fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px,color:#000000
    style T4 fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px,color:#000000

    %% –í–∏–∫–ª–∏–∫–∏ - —á–µ—Ä–≤–æ–Ω–∏–π
    style C1 fill:#ffcdd2,stroke:#c62828,stroke-width:3px,color:#000000
    style C2 fill:#ffcdd2,stroke:#c62828,stroke-width:3px,color:#000000
    style C3 fill:#ffcdd2,stroke:#c62828,stroke-width:3px,color:#000000
    style C4 fill:#ffcdd2,stroke:#c62828,stroke-width:3px,color:#000000

    %% –†—ñ—à–µ–Ω–Ω—è - –æ—Ä–∞–Ω–∂–µ–≤–∏–π
    style S1 fill:#ffe0b2,stroke:#ef6c00,stroke-width:3px,color:#000000
    style S2 fill:#ffe0b2,stroke:#ef6c00,stroke-width:3px,color:#000000
    style S3 fill:#ffe0b2,stroke:#ef6c00,stroke-width:3px,color:#000000
    style S4 fill:#ffe0b2,stroke:#ef6c00,stroke-width:3px,color:#000000
```

### –û—Å–Ω–æ–≤–Ω—ñ —Ü—ñ–ª—ñ

1. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è –æ—Ü—ñ–Ω–∫–∏ —Ä–∏–∑–∏–∫—ñ–≤**
   - –®–≤–∏–¥–∫–∏–π –∞–Ω–∞–ª—ñ–∑ –±—ñ–∑–Ω–µ—Å-—Å–∏—Ç—É–∞—Ü—ñ–π
   - –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
   - –ó–º–µ–Ω—à–µ–Ω–Ω—è –ª—é–¥—Å—å–∫–æ–≥–æ —Ñ–∞–∫—Ç–æ—Ä—É

2. **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –≤–∏—Ç—Ä–∞—Ç**
   - –ó–Ω–∏–∂–µ–Ω–Ω—è –≤–∞—Ä—Ç–æ—Å—Ç—ñ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ–π
   - –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å —Ä—ñ—à–µ–Ω–Ω—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è —Ä—É—Ç–∏–Ω–Ω–∏—Ö –∑–∞–¥–∞—á

3. **–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ —Ä—ñ—à–µ–Ω—å**
   - –ö–æ–º–±—ñ–Ω–∞—Ü—ñ—è –µ–∫—Å–ø–µ—Ä—Ç–Ω–∏—Ö –∑–Ω–∞–Ω—å
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ —Å–∏—Ç—É–∞—Ü—ñ—ó
   - –ë–∞–≥–∞—Ç–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞ –æ—Ü—ñ–Ω–∫–∞

### –ö–ª—é—á–æ–≤—ñ –∑–∞–¥–∞—á—ñ

1. **–ê–Ω–∞–ª—ñ–∑ —Ç–∞ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö –∫–∞—Ä—Ç
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ–π
   - –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

2. **–¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**
   - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ GPT-4
   - –í–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ –∑–Ω–∞–Ω—å
   - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
   - API –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π

3. **–ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å**
   - –ó–∞—Ö–∏—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö –¥–∞–Ω–∏—Ö
   - –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —è–∫–æ—Å—Ç—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
   - –í–∏—Å–æ–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Å–∏—Å—Ç–µ–º–∏

### –í–∏–∫–ª–∏–∫–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

1. **–Ø–∫—ñ—Å—Ç—å —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ–π**
   - –í–∏–∫–ª–∏–∫: –ó–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ç–æ—á–Ω–æ—Å—Ç—ñ —Ç–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—ñ
   - –†—ñ—à–µ–Ω–Ω—è: RAG —Å–∏—Å—Ç–µ–º–∞ + GPT-4
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: >95% —Ç–æ—á–Ω—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

2. **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**
   - –í–∏–∫–ª–∏–∫: –®–≤–∏–¥–∫—ñ—Å—Ç—å –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤
   - –†—ñ—à–µ–Ω–Ω—è: –í–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ + –∫–µ—à—É–≤–∞–Ω–Ω—è
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: 3-7 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø–∏—Ç

3. **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å**
   - –í–∏–∫–ª–∏–∫: –û–±—Ä–æ–±–∫–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
   - –†—ñ—à–µ–Ω–Ω—è: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –î–æ 10 –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

4. **–ë–µ–∑–ø–µ–∫–∞**
   - –í–∏–∫–ª–∏–∫: –ó–∞—Ö–∏—Å—Ç –¥–∞–Ω–∏—Ö —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
   - –†—ñ—à–µ–Ω–Ω—è: –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è + —Å–∏—Å—Ç–µ–º–∞ —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–∞ –∞—É–¥–∏—Ç

![Demo](app/static/images/banner.png)  

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –î—ñ–∞–≥—Ä–∞–º–∞ –∫–ª–∞—Å—ñ–≤

```mermaid
classDiagram
    class FlaskApp {
        +routes: Routes
        +templates: Templates
        +static: Static
    }
    class TarotAgent {
        +cards_path: str
        +vector_store_path: str
        +llm: ChatOpenAI
        +vector_store: TarotVectorStore
        +retrieval_chain: Chain
        +initialize_vector_store()
        +get_reading(question: str)
        +get_card_info(card_name: str)
        +_draw_cards(num_cards: int)
    }
    class TarotVectorStore {
        +db: Chroma
        +embeddings: SentenceTransformers
        +create_or_update(documents: List)
        +similarity_search(query: str)
    }
    class TarotDataLoader {
        +cards_path: str
        +prepare_documents()
        +_read_card_files()
    }
    class ChromaDB {
        +collection: Collection
        +persist()
    }
    class OpenAI {
        +model: str
        +temperature: float
    }

    FlaskApp --> TarotAgent: uses
    TarotAgent --> TarotVectorStore: manages
    TarotAgent --> OpenAI: uses
    TarotVectorStore --> ChromaDB: uses
    TarotAgent --> TarotDataLoader: uses

    %% –°—Ç–∏–ª—ñ –¥–ª—è –∫—Ä–∞—â–æ—ó —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ –Ω–∞ GitHub
    classDef webapp fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef core fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef storage fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef external fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000

    class FlaskApp webapp
    class TarotAgent core
    class TarotDataLoader core
    class TarotVectorStore storage
    class ChromaDB storage
    class OpenAI external
```

### –î—ñ–∞–≥—Ä–∞–º–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ

```mermaid
sequenceDiagram
    participant User as üë§ User
    participant Flask as üåê Flask App
    participant Agent as üé¥ Tarot Agent
    participant RAG as üîç RAG System
    participant LLM as ü§ñ GPT-4
    participant DB as üìä Vector DB

    Note over User,DB: –ü—Ä–æ—Ü–µ—Å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –¢–∞—Ä–æ —á–∏—Ç–∞–Ω–Ω—è

    User->>Flask: –ó–∞–¥–∞—î –ø–∏—Ç–∞–Ω–Ω—è
    activate Flask
    Flask->>Agent: –ü–µ—Ä–µ–¥–∞—î –ø–∏—Ç–∞–Ω–Ω—è
    activate Agent
    
    Agent->>Agent: –í–∏—Ç—è–≥—É—î –≤–∏–ø–∞–¥–∫–æ–≤—ñ –∫–∞—Ä—Ç–∏
    Agent->>DB: –®—É–∫–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–∞—Ä—Ç–∏
    activate DB
    DB-->>Agent: –ü–æ–≤–µ—Ä—Ç–∞—î –æ–ø–∏—Å–∏ –∫–∞—Ä—Ç
    deactivate DB
    
    Agent->>RAG: –§–æ—Ä–º—É—î –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑ –æ–ø–∏—Å—ñ–≤
    activate RAG
    RAG->>LLM: –ó–∞–ø–∏—Ç –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    activate LLM
    LLM-->>RAG: –ì–µ–Ω–µ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å
    deactivate LLM
    RAG-->>Agent: –ü–æ–≤–µ—Ä—Ç–∞—î —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—é
    deactivate RAG
    
    Agent-->>Flask: –ü–æ–≤–µ—Ä—Ç–∞—î –∫–∞—Ä—Ç–∏ —Ç–∞ —á–∏—Ç–∞–Ω–Ω—è
    deactivate Agent
    Flask-->>User: –ü–æ–∫–∞–∑—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    deactivate Flask
```

### –î—ñ–∞–≥—Ä–∞–º–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤

```mermaid
flowchart TD
    A[üöÄ –ü–æ—á–∞—Ç–æ–∫] --> B[üåê –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Flask]
    B --> C[‚öôÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó]
    C --> D[üé¥ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è TarotAgent]
    
    D --> E[ü§ñ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è LLM]
    D --> F[üìä –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Vector Store]
    
    F --> G[üìÑ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤]
    G --> H[üî¢ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–º–±–µ–¥—ñ–Ω–≥—ñ–≤]
    H --> I[üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ ChromaDB]
    
    E & I --> J[‚õìÔ∏è –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ª–∞–Ω—Ü—é–∂–∫—ñ–≤]
    J --> K[‚úÖ –ì–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏]
    
    K --> L{‚ùì –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É}
    L --> M[üéØ –í–∏–±—ñ—Ä –∫–∞—Ä—Ç]
    M --> N[üîç –ü–æ—à—É–∫ –æ–ø–∏—Å—ñ–≤]
    N --> O[üìù –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É]
    O --> P[‚ú® –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ]
    P --> Q[üì¶ –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É]
    Q --> R[üì§ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ]
    R --> L

    %% –°—Ç–∏–ª—ñ –¥–ª—è –∫—Ä–∞—â–æ—ó —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ
    classDef startend fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef process fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef decision fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef storage fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000

    class A,K startend
    class B,C,D,E,G,H,M,N,O,P,Q,R process
    class L decision
    class F,I,J storage
```

## High Level Design (HLD)

### –û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–Ω–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

–°–∏—Å—Ç–µ–º–∞ –æ—Ü—ñ–Ω–∫–∏ —Ä–∏–∑–∏–∫—ñ–≤ –∑ AI –∞–≥–µ–Ω—Ç–æ–º –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¢–∞—Ä–æ –∫–∞—Ä—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —Å–æ–±–æ—é –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É, —â–æ –∑–∞–±–µ–∑–ø–µ—á—É—î –Ω–∞–¥—ñ–π–Ω—É —Ç–∞ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—É –æ–±—Ä–æ–±–∫—É –∑–∞–ø–∏—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

```mermaid
graph TB
    %% User Interface Layer
    subgraph "Frontend Layer"
        UI[Web Interface]
        API[REST API Endpoints]
    end

    %% Application Layer
    subgraph "Application Layer"
        Flask[Flask Application]
        Routes[Routes Handler]
        Agent[Tarot AI Agent]
    end

    %% AI & ML Services
    subgraph "AI/ML Services"
        LLM[OpenAI GPT-4<br/>Turbo Preview]
        RAG[RAG System<br/>LangChain]
        Embeddings[SentenceTransformers<br/>all-MiniLM-L6-v2]
    end

    %% Data Layer
    subgraph "Data Layer"
        VectorStore[TarotVectorStore<br/>ChromaDB]
        CardData[Card Data<br/>Text Files]
        Images[Card Images<br/>Static Assets]
    end

    %% Monitoring & Observability
    subgraph "Observability"
        Monitor[TarotObservability]
        Logs[Logging System]
    end

    %% External Dependencies
    subgraph "External Services"
        OpenAI[OpenAI API]
    end

    %% User Flow
    User((User)) --> UI
    UI --> API
    API --> Routes
    Routes --> Agent

    %% Agent Processing
    Agent --> RAG
    Agent --> VectorStore
    RAG --> LLM
    LLM --> OpenAI

    %% Data Flow
    CardData --> VectorStore
    VectorStore --> Embeddings
    Images --> UI

    %% Monitoring
    Agent --> Monitor
    Monitor --> Logs

    %% Return Path
    OpenAI --> LLM
    LLM --> RAG
    RAG --> Agent
    Agent --> Routes
    Routes --> API
    API --> UI
    UI --> User

    %% –°—Ç–∏–ª—ñ –¥–ª—è –∫—Ä–∞—â–æ—ó —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ –Ω–∞ GitHub
    classDef frontend fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef application fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef ai fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef data fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef monitoring fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    classDef external fill:#f5f5f5,stroke:#424242,stroke-width:2px,color:#000
    classDef user fill:#fff8e1,stroke:#f57f17,stroke-width:2px,color:#000
    class UI,API frontend
    class Flask,Routes,Agent application
    class LLM,RAG,Embeddings ai
    class VectorStore,CardData,Images data
    class Monitor,Logs monitoring
    class OpenAI external
    class User user
```

### –î–µ—Ç–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TB
    subgraph "Client Tier"
        Browser[Web Browser]
        Mobile[Mobile Device]
    end

    subgraph "Presentation Tier"
        WebServer[Flask Web Server<br/>Port 8080]
        StaticAssets[Static Assets<br/>- CSS/JS<br/>- Card Images<br/>- Fonts]
        Templates[Jinja2 Templates<br/>index.html]
    end

    subgraph "Business Logic Tier"
        subgraph "Core Services"
            TarotAgent[Tarot Agent<br/>Main Controller]
            DataLoader[Tarot Data Loader<br/>Text Processing]
            Observability[Observability Service<br/>Monitoring & Logs]
        end
        
        subgraph "AI Processing Pipeline"
            RAGChain[RAG Chain<br/>Document Retrieval]
            LLMChain[LLM Chain<br/>Response Generation]
            CardSelector[Card Selection Logic<br/>Random Draw Algorithm]
        end
    end

    subgraph "AI/ML Services"
        subgraph "Language Models"
            GPT4[OpenAI GPT-4 Turbo<br/>Temperature: 0.7]
            Embeddings[SentenceTransformers<br/>all-MiniLM-L6-v2]
        end
        
        subgraph "Prompt Engineering"
            SystemPrompt[System Prompt<br/>Tarot Expert Persona]
            ContextTemplate[Context Template<br/>Ukrainian Language]
        end
    end

    subgraph "Data Persistence Tier"
        subgraph "Vector Database"
            ChromaDB[(ChromaDB<br/>Vector Store)]
            Metadata[Metadata Store<br/>Card Properties]
        end
        
        subgraph "File System"
            CardDescriptions[Card Descriptions<br/>468 .txt files]
            CardImages[Card Images<br/>206 .jpg files]
            VectorIndex[Vector Index<br/>Persistent Storage]
        end
    end

    subgraph "Configuration & Environment"
        EnvConfig[Environment Config<br/>.env file]
        Requirements[Dependencies<br/>requirements.txt]
        VenvPython[Python Virtual Env<br/>Python 3.12]
    end

    %% User Interactions
    Browser --> WebServer
    Mobile --> WebServer
    
    %% Web Server Routing
    WebServer --> Templates
    WebServer --> StaticAssets
    WebServer --> TarotAgent
    
    %% Core Service Interactions
    TarotAgent --> DataLoader
    TarotAgent --> Observability
    TarotAgent --> RAGChain
    TarotAgent --> CardSelector
    
    %% AI Pipeline
    RAGChain --> LLMChain
    RAGChain --> ChromaDB
    LLMChain --> GPT4
    LLMChain --> SystemPrompt
    GPT4 --> ContextTemplate
    
    %% Data Flow
    DataLoader --> CardDescriptions
    DataLoader --> Embeddings
    Embeddings --> ChromaDB
    ChromaDB --> VectorIndex
    ChromaDB --> Metadata
    
    %% Static Assets
    CardSelector --> CardImages
    StaticAssets --> CardImages
    
    %% Configuration
    TarotAgent --> EnvConfig
    WebServer --> VenvPython
    VenvPython --> Requirements
    
    %% –°—Ç–∏–ª—ñ –¥–ª—è –∫—Ä–∞—â–æ—ó —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ –Ω–∞ GitHub
    classDef client fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef presentation fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef business fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef ai fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef data fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    classDef config fill:#f5f5f5,stroke:#424242,stroke-width:2px,color:#000

    class Browser,Mobile client
    class WebServer,StaticAssets,Templates presentation
    class TarotAgent,DataLoader,Observability,RAGChain,LLMChain,CardSelector business
    class GPT4,Embeddings,SystemPrompt,ContextTemplate ai
    class ChromaDB,Metadata,CardDescriptions,CardImages,VectorIndex data
    class EnvConfig,Requirements,VenvPython config
```

### –ü–æ—Ç—ñ–∫ –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—É

```mermaid
sequenceDiagram
    participant User as –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á
    participant Browser as –í–µ–±-–±—Ä–∞—É–∑–µ—Ä
    participant Flask as Flask App
    participant Agent as Tarot Agent
    participant Selector as Card Selector
    participant VectorDB as ChromaDB
    participant RAG as RAG Chain
    participant LLM as GPT-4 API
    participant Monitor as Observability

    Note over User,Monitor: –ü—Ä–æ—Ü–µ—Å –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¢–∞—Ä–æ —á–∏—Ç–∞–Ω–Ω—è

    User->>Browser: –í–≤–æ–¥–∏—Ç—å –ø–∏—Ç–∞–Ω–Ω—è
    Browser->>Flask: POST /api/reading<br/>{"question": "–ø–∏—Ç–∞–Ω–Ω—è"}
    activate Flask
    
    Flask->>Agent: get_reading(question)
    activate Agent
    Agent->>Monitor: –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ—á–∞—Ç–∫—É –∑–∞–ø–∏—Ç—É
    
    Note over Agent,Selector: –í–∏–±—ñ—Ä –∫–∞—Ä—Ç
    Agent->>Selector: _draw_cards(num_cards=3)
    Selector-->>Agent: –°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç + –ø–æ–ª–æ–∂–µ–Ω–Ω—è
    
    Note over Agent,VectorDB: –ü–æ—à—É–∫ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–∞—Ä—Ç–∏
    loop –î–ª—è –∫–æ–∂–Ω–æ—ó –∫–∞—Ä—Ç–∏
        Agent->>VectorDB: similarity_search(card_name)
        VectorDB-->>Agent: –û–ø–∏—Å–∏ –∫–∞—Ä—Ç–∏ (top-k=5)
    end
    
    Note over Agent,RAG: –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
    Agent->>RAG: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑ –æ–ø–∏—Å—ñ–≤
    RAG->>Agent: –ü—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–π prompt
    
    Note over Agent,LLM: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—ó
    Agent->>LLM: –ó–∞–ø–∏—Ç –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º<br/>(—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 0.7)
    LLM-->>Agent: –Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é
    
    Note over Agent,Monitor: –û–±—Ä–æ–±–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
    Agent->>Monitor: –õ–æ–≥—É–≤–∞–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
    Agent->>Agent: –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ<br/>+ —à–ª—è—Ö–∏ –¥–æ –∑–æ–±—Ä–∞–∂–µ–Ω—å
    
    Agent-->>Flask: {"cards": [...], "reading": "..."}
    deactivate Agent
    Flask-->>Browser: JSON –≤—ñ–¥–ø–æ–≤—ñ–¥—å
    deactivate Flask
    Browser-->>User: –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç<br/>—Ç–∞ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—ó
    
    Note over User,Monitor: –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É
    
    alt –ü–æ–º–∏–ª–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—ñ
        Agent->>Monitor: –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏
        Agent-->>Flask: –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏
        Flask-->>Browser: Error 500
        Browser-->>User: –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
    end
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TD
    subgraph "Tarot AI Risk Assessment System"
        subgraph "Web Application"
            FlaskApp[Flask Application<br/>- routes.py<br/>- templates/<br/>- static/]
            WebUI[Web Interface<br/>- Adaptive Design<br/>- Card Display<br/>- Ukrainian UI]
        end

        subgraph "AI Agent Core"
            TarotAgent[Tarot Agent<br/>- Card Selection<br/>- Reading Generation<br/>- Error Handling]
            
            DataLoader[Data Loader<br/>- Text File Processing<br/>- Document Preparation<br/>- Metadata Extraction]
            
            VectorStore[Vector Store<br/>- ChromaDB Interface<br/>- Similarity Search<br/>- Document Storage]
        end

        subgraph "AI/ML Pipeline"
            RAGSystem[RAG System<br/>- Retrieval Chain<br/>- Context Formation<br/>- Document Combination]
            
            LLMInterface[LLM Interface<br/>- GPT-4 Integration<br/>- Prompt Templates<br/>- Response Processing]
            
            Embeddings[Embedding Service<br/>- SentenceTransformers<br/>- Vector Generation<br/>- Text Encoding]
        end

        subgraph "Data Storage"
            CardDatabase[Card Database<br/>- 78 Tarot Cards<br/>- Multiple Descriptions<br/>- Upright/Reversed]
            
            VectorDB[Vector Database<br/>- ChromaDB<br/>- Persistent Storage<br/>- Similarity Index]
            
            ImageAssets[Image Assets<br/>- Card Images<br/>- Multiple Decks<br/>- Static Files]
        end

        subgraph "Infrastructure"
            Observability[Observability<br/>- Logging<br/>- Monitoring<br/>- Error Tracking]
            
            Configuration[Configuration<br/>- Environment Variables<br/>- API Keys<br/>- Settings]
            
            Dependencies[Dependencies<br/>- Python Packages<br/>- Virtual Environment<br/>- Requirements]
        end
    end

    subgraph "External Services"
        OpenAIAPI[OpenAI API<br/>- GPT-4 Turbo<br/>- Rate Limiting<br/>- Authentication]
    end

    subgraph "Development Tools"
        InitDB[Database Initialization<br/>- init_db.py<br/>- verify_db.py<br/>- check_documents.py]
        
        Testing[Testing Suite<br/>- test_rag.py<br/>- RAG Testing<br/>- Integration Tests]
    end

    %% Main connections
    FlaskApp --> TarotAgent
    TarotAgent --> DataLoader
    TarotAgent --> VectorStore
    TarotAgent --> RAGSystem
    TarotAgent --> Observability

    DataLoader --> CardDatabase
    DataLoader --> Embeddings
    VectorStore --> VectorDB
    RAGSystem --> LLMInterface
    RAGSystem --> VectorStore

    LLMInterface --> OpenAIAPI
    Embeddings --> VectorDB
    
    WebUI --> ImageAssets
    TarotAgent --> Configuration
    
    %% Development connections
    InitDB --> VectorDB
    InitDB --> CardDatabase
    Testing --> TarotAgent
    
    %% Infrastructure connections
    FlaskApp --> Dependencies
    TarotAgent --> Dependencies

    %% –°—Ç–∏–ª—ñ –¥–ª—è –∫—Ä–∞—â–æ—ó —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ –Ω–∞ GitHub
    classDef webapp fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef aicore fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef mlpipeline fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef datastorage fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef infrastructure fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    classDef external fill:#f5f5f5,stroke:#424242,stroke-width:2px,color:#000
    classDef devtools fill:#fff8e1,stroke:#f57f17,stroke-width:2px,color:#000

    class FlaskApp,WebUI webapp
    class TarotAgent,DataLoader,VectorStore aicore
    class RAGSystem,LLMInterface,Embeddings mlpipeline
    class CardDatabase,VectorDB,ImageAssets datastorage
    class Observability,Configuration,Dependencies infrastructure
    class OpenAIAPI external
    class InitDB,Testing devtools
```

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏

1. **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å**: –°–∏—Å—Ç–µ–º–∞ —Ä–æ–∑–¥—ñ–ª–µ–Ω–∞ –Ω–∞ —á—ñ—Ç–∫—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–º–∏ –æ–±–æ–≤'—è–∑–∫–∞–º–∏
2. **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å**: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–Ω–∏—Ö –±–∞–∑ –¥–∞–Ω–∏—Ö —Ç–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏
3. **–°–ø–æ—Å—Ç–µ—Ä–µ–∂—É–≤–∞–Ω—ñ—Å—Ç—å**: –í–±—É–¥–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è
4. **–ë–µ–∑–ø–µ–∫–∞**: –ö–µ—Ä—É–≤–∞–Ω–Ω—è API –∫–ª—é—á–∞–º–∏ —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
5. **–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ—Å—Ç—å**: –ß—ñ—Ç–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥—É —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### –¢–µ—Ö–Ω—ñ—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ HLD

#### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- **–ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**: 3-7 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø–∏—Ç
- **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ñ—Å—Ç—å**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤
- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å**: –î–æ 10 –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- **–ö–µ—à—É–≤–∞–Ω–Ω—è**: –í–µ–∫—Ç–æ—Ä–Ω—ñ –µ–º–±–µ–¥—ñ–Ω–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ

#### –ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å
- **Error Handling**: –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –Ω–∞ –≤—Å—ñ—Ö —Ä—ñ–≤–Ω—è—Ö
- **Logging**: –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- **Fallback**: –†–µ–∑–µ—Ä–≤–Ω—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –ø—Ä–∏ –∑–±–æ—è—Ö API
- **Validation**: –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö

#### –ë–µ–∑–ø–µ–∫–∞

1. **API Keys —Ç–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ –¥–∞–Ω—ñ**
   ```python
   # –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è python-dotenv –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö
   from dotenv import load_dotenv
   load_dotenv()
   
   agent = TarotAgent(
       cards_path=os.getenv('CARDS_DATA_PATH'),
       vector_store_path=os.getenv('VECTOR_STORE_PATH')
   )
   ```

2. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö**
   ```python
   @app.route('/api/reading', methods=['POST'])
   async def get_reading():
       try:
           data = request.get_json()
           if not data or 'question' not in data:
               return jsonify({'error': 'Question is required'}), 400
   ```

3. **–ë–µ–∑–ø–µ—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫**
   ```python
   try:
       result = await agent.get_reading(question=data['question'])
   except Exception as e:
       # –õ–æ–≥—É—î–º–æ –¥–µ—Ç–∞–ª—ñ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
       app.logger.error(f"Error: {str(e)}\n{traceback.format_exc()}")
       # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –±–µ–∑–ø–µ—á–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
       return jsonify({'error': str(e)}), 500
   ```

4. **–ó–∞—Ö–∏—Å—Ç –≤–∏—Ç–æ–∫—É –∑ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó**
   ```python
   # –í—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑–±–æ—Ä—É –¥–∞–Ω–∏—Ö –≤ ChromaDB
   os.environ["ANONYMIZED_TELEMETRY"] = "False"
   os.environ["CHROMA_SERVER_NOFILE"] = "1"
   
   # –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó –Ω–∞ —Ä—ñ–≤–Ω—ñ –ª–æ–≥—É–≤–∞–Ω–Ω—è
   logging.getLogger("chromadb.telemetry").setLevel(logging.CRITICAL)
   ```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏

1. **Flask Backend**
   - –û–±—Ä–æ–±–∫–∞ HTTP-–∑–∞–ø–∏—Ç—ñ–≤
   - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è
   - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ AI-–∞–≥–µ–Ω—Ç–æ–º

2. **AI Agent (LangChain)**
   - –í–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (ChromaDB)
   - –ï–º–±–µ–¥—ñ–Ω–≥–∏ (SentenceTransformers)
   - LLM (GPT-4-turbo-preview)
   - –õ–∞–Ω—Ü—é–∂–∫–∏ –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤

3. **Frontend**
   - –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä –∫–∞—Ä—Ç
   - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç —Ç–∞ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
tarot/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ routes.py
‚îÇ   ‚îú‚îÄ‚îÄ tarot_agent/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vector_store.py
‚îÇ   ‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ images/cards/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îÇ       ‚îî‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ vector_store/          # –Ü–≥–Ω–æ—Ä—É—î—Ç—å—Å—è –≤ git
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ run.py
‚îú‚îÄ‚îÄ init_db.py
‚îî‚îÄ‚îÄ verify_db.py
```

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é**
   ```bash
   git clone https://github.com/igorgorovoy/fwdays-hackaton-ai-agent-risk-assessment-system
   cd fwdays-hackaton-ai-agent-risk-assessment-system
   ```

2. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞**
   ```bash
   python -m venv venv
   source venv/bin/activate  # –¥–ª—è Unix
   # –∞–±–æ
   venv\Scripts\activate  # –¥–ª—è Windows
   ```

3. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**
   ```bash
   pip install -r requirements.txt
   ```

4. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞**
   - –°–∫–æ–ø—ñ—é–π—Ç–µ `.env.example` –≤ `.env`
   - –î–æ–¥–∞–π—Ç–µ —Å–≤—ñ–π OpenAI API –∫–ª—é—á
   ```bash
   cp env.example .env
   # –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env —Ñ–∞–π–ª, –¥–æ–¥–∞–≤—à–∏ —Å–≤—ñ–π OPENAI_API_KEY
   ```

## –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–µ–∫—Ç–æ—Ä–Ω–æ—ó –±–∞–∑–∏

1. **–ó–∞–ø—É—Å–∫ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó**
   ```bash
   python init_db.py
   ```
   –°–∫—Ä–∏–ø—Ç:
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å –æ–ø–∏—Å–∏ –∫–∞—Ä—Ç –∑ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤
   - –°—Ç–≤–æ—Ä–∏—Ç—å –µ–º–±–µ–¥—ñ–Ω–≥–∏
   - –ó–±–µ—Ä–µ–∂–µ —ó—Ö —É ChromaDB

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó**
   ```bash
   python verify_db.py
   ```
   –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å:
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
   - –ù–∞—è–≤–Ω—ñ—Å—Ç—å –æ–ø–∏—Å—ñ–≤ –¥–ª—è –≤—Å—ñ—Ö –∫–∞—Ä—Ç
   - –ö–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –º–µ—Ç–∞–¥–∞–Ω–∏—Ö

## –ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É

1. **–õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫**
   ```bash
   python run.py
   ```
   –î–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: http://localhost:8080

2. **Docker (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)**
   ```bash
   docker-compose up --build
   ```

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è RAG (test_rag.py)

–°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ RAG —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π:
```bash
python test_rag.py
```

**–©–æ —Ç–µ—Å—Ç—É—î—Ç—å—Å—è:**
1. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∞–≥–µ–Ω—Ç–∞:
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ LLM
   - –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ—ó –±–∞–∑–∏
   - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ª–∞–Ω—Ü—é–∂–∫—ñ–≤ –æ–±—Ä–æ–±–∫–∏

2. –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤:
   - "–©–æ –æ–∑–Ω–∞—á–∞—î –∫–∞—Ä—Ç–∞ –ú–∞–≥?"
   - "–†–æ–∑–∫–∞–∂–∏ –ø—Ä–æ –∫–∞—Ä—Ç—É –°–º–µ—Ä—Ç—å"
   - "–©–æ —Å–∏–º–≤–æ–ª—ñ–∑—É—î –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω–∏?"
   - "–û–ø–∏—à–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏ –ú—ñ—Å—è—Ü—å"
   - "–©–æ –æ–∑–Ω–∞—á–∞—î –¢—É–∑ –ö—É–±–∫—ñ–≤?"

3. –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä –∫–∞—Ä—Ç
   - –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª–æ–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç (–ø—Ä—è–º–µ/–ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–µ)
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —à–ª—è—Ö—ñ–≤ –¥–æ –∑–æ–±—Ä–∞–∂–µ–Ω—å
   - –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É:**
```
–ó–∞–ø–∏—Ç: –©–æ –æ–∑–Ω–∞—á–∞—î –∫–∞—Ä—Ç–∞ –ú–∞–≥?

–í–∏—Ç—è–≥–Ω—É—Ç—ñ –∫–∞—Ä—Ç–∏:
- The World (–ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞)
- The Hermit (–ø—Ä—è–º–∞)
- The Devil (–ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞)

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
[–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è –∫–∞—Ä—Ç...]
```

### RAG Evaluation (rag_evaluate.py)

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ü—ñ–Ω–∫–∏ —è–∫–æ—Å—Ç—ñ RAG (Retrieval-Augmented Generation) —Å–∏—Å—Ç–µ–º–∏ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Ä—ñ–∑–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫.

#### –ó–∞–ø—É—Å–∫ –æ—Ü—ñ–Ω–∫–∏

```bash
# –û—Å–Ω–æ–≤–Ω–∞ –æ—Ü—ñ–Ω–∫–∞
python rag_evaluate.py

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ—è—Å–Ω–µ–Ω–Ω—è F1 Score
python rag_evaluate.py --explain
```

#### –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è

**1. –ú–µ—Ç—Ä–∏–∫–∏ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è (Retrieval Metrics)**

- **Precision (–¢–æ—á–Ω—ñ—Å—Ç—å)**
  ```
  Precision = –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏—Ç—è–≥–Ω—É—Ç—ñ –∫–∞—Ä—Ç–∏ / –í—Å—ñ –≤–∏—Ç—è–≥–Ω—É—Ç—ñ –∫–∞—Ä—Ç–∏
  ```
  - –ü–æ–∫–∞–∑—É—î, —Å–∫—ñ–ª—å–∫–∏ –∑ –≤–∏—Ç—è–≥–Ω—É—Ç–∏—Ö –∫–∞—Ä—Ç –±—É–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏
  - –ü—Ä–∏–∫–ª–∞–¥: –≤–∏—Ç—è–≥–ª–∏ 3 –∫–∞—Ä—Ç–∏, 2 –ø—Ä–∞–≤–∏–ª—å–Ω—ñ ‚Üí Precision = 2/3 = 0.67

- **Recall (–ü–æ–≤–Ω–æ—Ç–∞)**
  ```
  Recall = –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏—Ç—è–≥–Ω—É—Ç—ñ –∫–∞—Ä—Ç–∏ / –í—Å—ñ –æ—á—ñ–∫—É–≤–∞–Ω—ñ –∫–∞—Ä—Ç–∏
  ```
  - –ü–æ–∫–∞–∑—É—î, —Å–∫—ñ–ª—å–∫–∏ –æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –∫–∞—Ä—Ç –±—É–ª–æ –∑–Ω–∞–π–¥–µ–Ω–æ
  - –ü—Ä–∏–∫–ª–∞–¥: –æ—á—ñ–∫—É–≤–∞–ª–∏ 2 –∫–∞—Ä—Ç–∏, –∑–Ω–∞–π—à–ª–∏ 1 ‚Üí Recall = 1/2 = 0.5

- **F1 Score (–ì–∞—Ä–º–æ–Ω—ñ—á–Ω–µ —Å–µ—Ä–µ–¥–Ω—î)**
  ```
  F1 = 2 √ó (Precision √ó Recall) / (Precision + Recall)
  ```
  - –ë–∞–ª–∞–Ω—Å—É—î –º—ñ–∂ —Ç–æ—á–Ω—ñ—Å—Ç—é —Ç–∞ –ø–æ–≤–Ω–æ—Ç–æ—é
  - F1 = 1.0 - —ñ–¥–µ–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  - F1 > 0.8 - –≤—ñ–¥–º—ñ–Ω–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  - F1 > 0.6 - –¥–æ–±—Ä–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**2. –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É**

- **Keyword Presence**: –í—ñ–¥—Å–æ—Ç–æ–∫ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- **Context Score**: –û—Ü—ñ–Ω–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—ñ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
- **Response Quality**: –ê–Ω–∞–ª—ñ–∑ —è–∫–æ—Å—Ç—ñ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

#### –¢–µ—Å—Ç–æ–≤—ñ –≤–∏–ø–∞–¥–∫–∏

–°–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø'—è—Ç—å —Ç–µ—Å—Ç–æ–≤–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤ –¥–ª—è –æ—Ü—ñ–Ω–∫–∏:

```python
test_cases = [
    {
        "query": "–©–æ –æ–∑–Ω–∞—á–∞—î –∫–∞—Ä—Ç–∞ –ú–∞–≥?",
        "expected_cards": ["The Magician"],
        "expected_keywords": ["—Ç–≤–æ—Ä—á—ñ—Å—Ç—å", "–≤–æ–ª—è", "–º–∞–π—Å—Ç–µ—Ä–Ω—ñ—Å—Ç—å", "—Å–∏–ª–∞", "—Ç–∞–ª–∞–Ω—Ç"],
        "expected_context": ["–ø–µ—Ä—à–∞ –∫–∞—Ä—Ç–∞ —Å—Ç–∞—Ä—à–∏—Ö –∞—Ä–∫–∞–Ω—ñ–≤", "–µ–ª–µ–º–µ–Ω—Ç –ø–æ–≤—ñ—Ç—Ä—è"]
    },
    # ... —ñ–Ω—à—ñ —Ç–µ—Å—Ç–∏
]
```

#### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É –æ—Ü—ñ–Ω–∫–∏

```
üîç –ü–æ—á–∞—Ç–æ–∫ –æ—Ü—ñ–Ω–∫–∏ RAG —Å–∏—Å—Ç–µ–º–∏...
============================================================

üìã –¢–µ—Å—Ç 1/5: –©–æ –æ–∑–Ω–∞—á–∞—î –∫–∞—Ä—Ç–∞ –ú–∞–≥?
--------------------------------------------------
üé¥ –û—á—ñ–∫—É–≤–∞–Ω—ñ –∫–∞—Ä—Ç–∏: ['The Magician']
üéØ –í–∏—Ç—è–≥–Ω—É—Ç—ñ –∫–∞—Ä—Ç–∏: ['The World', 'The Hermit', 'Death']

üìä –ú–µ—Ç—Ä–∏–∫–∏ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è:
   ‚Ä¢ Precision: 0.00
   ‚Ä¢ Recall: 0.00
   ‚Ä¢ F1 Score: 0.00
   ‚ùå –ü—Ä–æ–ø—É—â–µ–Ω—ñ –∫–∞—Ä—Ç–∏: ['The Magician']
   ‚ûï –ó–∞–π–≤—ñ –∫–∞—Ä—Ç–∏: ['The World', 'The Hermit', 'Death']

üìù –ê–Ω–∞–ª—ñ–∑ –∫–æ–Ω—Ç–µ–Ω—Ç—É:
   ‚Ä¢ –ö–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞: 0.80 (4/5)
   ‚Ä¢ –ö–æ–Ω—Ç–µ–∫—Å—Ç: 0.50
   ‚úÖ –ó–Ω–∞–π–¥–µ–Ω—ñ —Å–ª–æ–≤–∞: ['—Ç–≤–æ—Ä—á—ñ—Å—Ç—å', '–≤–æ–ª—è', '–º–∞–π—Å—Ç–µ—Ä–Ω—ñ—Å—Ç—å', '—Å–∏–ª–∞']
   ‚ùå –ü—Ä–æ–ø—É—â–µ–Ω—ñ —Å–ª–æ–≤–∞: ['—Ç–∞–ª–∞–Ω—Ç']

üìà –Ø–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:
   ‚Ä¢ –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤: 156
   ‚Ä¢ –†—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω—ñ—Å—Ç—å —Å–ª–æ–≤–Ω–∏–∫–∞: 0.73
   ‚Ä¢ –°–µ—Ä–µ–¥–Ω—è –¥–æ–≤–∂–∏–Ω–∞ —Ä–µ—á–µ–Ω–Ω—è: 12.0 —Å–ª—ñ–≤

============================================================
üìä –ó–ê–ì–ê–õ–¨–ù–Ü –†–ï–ó–£–õ–¨–¢–ê–¢–ò
============================================================
üéØ –°–µ—Ä–µ–¥–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è:
   ‚Ä¢ F1 Score: 0.000 ¬± 0.000
   ‚Ä¢ Precision: 0.000 ¬± 0.000
   ‚Ä¢ Recall: 0.000 ¬± 0.000

üìù –°–µ—Ä–µ–¥–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É:
   ‚Ä¢ –ö–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞: 0.760 ¬± 0.110
   ‚Ä¢ –ö–æ–Ω—Ç–µ–∫—Å—Ç: 0.400 ¬± 0.200

üèÜ –ó–∞–≥–∞–ª—å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ RAG —Å–∏—Å—Ç–µ–º–∏: 0.387
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

–î–µ—Ç–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `rag_evaluation_results.json`:

```json
{
  "summary": {
    "average_f1_score": 0.0,
    "average_precision": 0.0,
    "average_recall": 0.0,
    "average_keyword_score": 0.76,
    "average_context_score": 0.4,
    "overall_score": 0.387,
    "total_tests": 5
  },
  "detailed_results": [
    {
      "test_number": 1,
      "query": "–©–æ –æ–∑–Ω–∞—á–∞—î –∫–∞—Ä—Ç–∞ –ú–∞–≥?",
      "expected_cards": ["The Magician"],
      "retrieved_cards": ["The World", "The Hermit", "Death"],
      "retrieval_metrics": {...},
      "keyword_metrics": {...},
      "context_metrics": {...},
      "quality_metrics": {...},
      "generated_text": "..."
    }
  ]
}
```

#### –Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

**–ú–µ—Ç—Ä–∏–∫–∏ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è:**
- **F1 = 0.0**: –°–∏—Å—Ç–µ–º–∞ –Ω–µ –≤–∏—Ç—è–≥—É—î –æ—á—ñ–∫—É–≤–∞–Ω—ñ –∫–∞—Ä—Ç–∏ (—Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –≤–∏–±–æ—Ä—É –∫–∞—Ä—Ç —É –¢–∞—Ä–æ)
- **Precision/Recall = 0.0**: –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –≤–∏–ø–∞–¥–∫–æ–≤—ñ—Å—Ç—å –≤–∏–±–æ—Ä—É –∫–∞—Ä—Ç

**–ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É:**
- **Keyword Presence > 0.7**: –í—ñ–¥–º—ñ–Ω–Ω–æ - —Å–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞—î –±—ñ–ª—å—à—ñ—Å—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö —Ç–µ—Ä–º—ñ–Ω—ñ–≤
- **Context Score > 0.4**: –î–æ–±—Ä–µ - —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–∑—É–º—ñ—î –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–∞—Ä—Ç

**–ó–∞–≥–∞–ª—å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞:**
- **0.8-1.0**: –í—ñ–¥–º—ñ–Ω–Ω–∞ —è–∫—ñ—Å—Ç—å RAG —Å–∏—Å—Ç–µ–º–∏
- **0.6-0.8**: –î–æ–±—Ä–∞ —è–∫—ñ—Å—Ç—å, –º–æ–∂–ª–∏–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è
- **0.4-0.6**: –ó–∞–¥–æ–≤—ñ–ª—å–Ω–∞ —è–∫—ñ—Å—Ç—å, –ø–æ—Ç—Ä–µ–±—É—î –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
- **< 0.4**: –ü–æ—Ç—Ä–µ–±—É—î –∑–Ω–∞—á–Ω–∏—Ö –ø–æ–∫—Ä–∞—â–µ–Ω—å

#### –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –æ—Ü—ñ–Ω–∫–∏ –¢–∞—Ä–æ —Å–∏—Å—Ç–µ–º–∏

1. **–í–∏–ø–∞–¥–∫–æ–≤—ñ—Å—Ç—å –∫–∞—Ä—Ç**: –ù–∏–∑—å–∫—ñ –º–µ—Ç—Ä–∏–∫–∏ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è —î –Ω–æ—Ä–º–∞–ª—å–Ω–∏–º–∏, –æ—Å–∫—ñ–ª—å–∫–∏ –∫–∞—Ä—Ç–∏ –æ–±–∏—Ä–∞—é—Ç—å—Å—è –≤–∏–ø–∞–¥–∫–æ–≤–æ
2. **–Ø–∫—ñ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç—É**: –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–æ–∫—É—Å –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—ñ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ–π
3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ñ—Å—Ç—å**: –í–∞–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∫–ª—é—á–µ–Ω–Ω—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–∞—Ä—Ç–∏
4. **–ú–æ–≤–Ω–∞ —è–∫—ñ—Å—Ç—å**: –û—Ü—ñ–Ω–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ç–∞ —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω–æ—Å—Ç—ñ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

### –ê–Ω–∞–ª—ñ–∑ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ (check_documents.py)

–°–∫—Ä–∏–ø—Ç –¥–ª—è –≥–ª–∏–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —É –≤–µ–∫—Ç–æ—Ä–Ω—ñ–π –±–∞–∑—ñ:
```bash
python check_documents.py
```

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:**
1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–±—Ä–∞–Ω–∏—Ö –∫–∞—Ä—Ç:
   - –°—Ç–∞—Ä—à—ñ –ê—Ä–∫–∞–Ω–∏:
     - The Fool
     - The Magician
     - Death
     - The World
   - –ú–æ–ª–æ–¥—à—ñ –ê—Ä–∫–∞–Ω–∏:
     - Ace of Cups
     - King of Pentacles
     - Queen of Swords
     - Knight of Wands

2. –ê–Ω–∞–ª—ñ–∑ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö:
   - type: —Ç–∏–ø –∫–∞—Ä—Ç–∏ (major/minor)
   - name: –Ω–∞–∑–≤–∞ –∫–∞—Ä—Ç–∏
   - suit: –º–∞—Å—Ç—å (–¥–ª—è –º–æ–ª–æ–¥—à–∏—Ö –∞—Ä–∫–∞–Ω—ñ–≤)
   - aspect: –ø–æ–ª–æ–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏ (upright/reversed)

3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   - –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
   - –†–æ–∑–ø–æ–¥—ñ–ª –∑–∞ —Ç–∏–ø–∞–º–∏:
     - –°—Ç–∞—Ä—à—ñ –ê—Ä–∫–∞–Ω–∏: ~118 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
     - –ú–æ–ª–æ–¥—à—ñ –ê—Ä–∫–∞–Ω–∏: ~882 –¥–æ–∫—É–º–µ–Ω—Ç–∏

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É:**
```
=== The Fool ===
–ó–Ω–∞–π–¥–µ–Ω–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é:
–ö–æ–Ω—Ç–µ–Ω—Ç: The Fool is always whole, healthy and without fear...
–ú–µ—Ç–∞–¥–∞–Ω—ñ: {'aspect': 'upright', 'name': 'Fool', 'suit': 'NA', 'type': 'major'}

–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤: 1000
–†–æ–∑–ø–æ–¥—ñ–ª –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∑–∞ —Ç–∏–ø–∞–º–∏:
- minor: 882 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- major: 118 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
```

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–µ—Å—Ç–∏

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó (init_db.py)**:
   - –ö–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
   - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–º–±–µ–¥—ñ–Ω–≥—ñ–≤
   - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É ChromaDB

2. **–í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –±–∞–∑–∏ (verify_db.py)**:
   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö
   - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫—É
   - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö

## API Endpoints

### GET /
–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

### POST /api/reading
–û—Ç—Ä–∏–º–∞–Ω–Ω—è —á–∏—Ç–∞–Ω–Ω—è –¢–∞—Ä–æ.

**Request:**
```json
{
    "question": "–í–∞—à–µ –ø–∏—Ç–∞–Ω–Ω—è —Ç—É—Ç"
}
```

**Response:**
```json
{
    "cards": [
        {
            "name": "Ace of Pentacles",
            "is_reversed": true,
            "image_path": "/static/images/cards/MinorArcana_Pentacles/1.jpg",
            "position": "–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞"
        },
        {
            "name": "King of Pentacles", 
            "is_reversed": true,
            "image_path": "/static/images/cards/MinorArcana_Pentacles/14.jpg",
            "position": "–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞"
        },
        {
            "name": "The High Priestess",
            "is_reversed": false,
            "image_path": "/static/images/cards/MajorArcana/2.jpg",
            "position": "–ü—Ä—è–º–∞"
        }
    ],
    "reading": "**–í–∞—à—ñ –∫–∞—Ä—Ç–∏:**\n\n### üé¥ Ace of Pentacles (–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞)\n–ù–æ–≤–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —É —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ–π —Å—Ñ–µ—Ä—ñ –º–æ–∂–µ –±—É—Ç–∏ –∑–∞—Ç—Ä–∏–º–∞–Ω–∞ –∞–±–æ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∞. –ü–æ—Ç—Ä—ñ–±–Ω–æ —Ç–µ—Ä–ø—ñ–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–æ—Å–º–∏—Å–ª–µ–Ω–Ω—è –ø—ñ–¥—Ö–æ–¥—É –¥–æ –º–∞—Ç–µ—Ä—ñ–∞–ª—å–Ω–∏—Ö –ø–∏—Ç–∞–Ω—å.\n\n### üëë King of Pentacles (–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞)\n–ù–µ—Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å —É –º–∞—Ç–µ—Ä—ñ–∞–ª—å–Ω–∏—Ö –ø–∏—Ç–∞–Ω–Ω—è—Ö, –≤—Ç—Ä–∞—Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é –Ω–∞–¥ —Ñ—ñ–Ω–∞–Ω—Å–∞–º–∏. –ú–æ–∂–ª–∏–≤–∞ –∂–∞–¥—ñ–±–Ω—ñ—Å—Ç—å –∞–±–æ –Ω–µ—Ä–æ–∑—É–º–Ω–µ –≤–∏—Ç—Ä–∞—á–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤.\n\n### ‚ú® The High Priestess (–ü—Ä—è–º–∞)\n–Ü–Ω—Ç—É—ó—Ü—ñ—è —Ç–∞ –≤–Ω—É—Ç—Ä—ñ—à–Ω—è –º—É–¥—Ä—ñ—Å—Ç—å –¥–æ–ø–æ–º–æ–∂—É—Ç—å –∑–Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —à–ª—è—Ö. –ß–∞—Å –¥–æ–≤—ñ—Ä–∏—Ç–∏—Å—è –ø—ñ–¥—Å–≤—ñ–¥–æ–º–æ—Å—Ç—ñ —Ç–∞ –ø—Ä–∏—Å–ª—É—Ö–∞—Ç–∏—Å—è –¥–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –≥–æ–ª–æ—Å—É.\n\n**–ó–∞–≥–∞–ª—å–Ω–∏–π –≤–∏—Å–Ω–æ–≤–æ–∫:** –ü–µ—Ä—ñ–æ–¥ –ø–µ—Ä–µ–æ—Å–º–∏—Å–ª–µ–Ω–Ω—è —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö —Ä—ñ—à–µ–Ω—å —Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π. –í–∞–∂–ª–∏–≤–æ –ø–æ—î–¥–Ω–∞—Ç–∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ—Å—Ç—å —ñ–∑ –¥–æ–≤—ñ—Ä–æ—é –¥–æ —ñ–Ω—Ç—É—ó—Ü—ñ—ó –¥–ª—è –ø–æ–¥–æ–ª–∞–Ω–Ω—è –º–∞—Ç–µ—Ä—ñ–∞–ª—å–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤."
}
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ü–æ–ª–µ `reading` –ø—ñ–¥—Ç—Ä–∏–º—É—î –±–∞–∑–æ–≤–∏–π –º–∞—Ä–∫–¥–∞—É–Ω –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è:
- `**—Ç–µ–∫—Å—Ç**` - –∂–∏—Ä–Ω–∏–π —Ç–µ–∫—Å—Ç
- `### –∑–∞–≥–æ–ª–æ–≤–æ–∫` - –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ç—Ä–µ—Ç—å–æ–≥–æ —Ä—ñ–≤–Ω—è  
- `*—Ç–µ–∫—Å—Ç*` - –∫—É—Ä—Å–∏–≤
- `\n` - —Ä–æ–∑—Ä–∏–≤–∏ —Ä—è–¥–∫—ñ–≤

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –º–∞—Ä–∫–¥–∞—É–Ω —É HTML –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è.

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –í–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö

- **–¢–∏–ø**: ChromaDB
- **–ï–º–±–µ–¥—ñ–Ω–≥–∏**: SentenceTransformers (all-MiniLM-L6-v2)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤**:
  - 234 –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∑–∞–≥–∞–ª–æ–º (78 –∫–∞—Ä—Ç √ó 3 –¥–æ–∫—É–º–µ–Ω—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç—É)
  - –î–ª—è –∫–æ–∂–Ω–æ—ó –∫–∞—Ä—Ç–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è:
    1. –ü–æ–≤–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –∑ —É—Å—ñ—î—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é
    2. –î–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–Ω—è
    3. –î–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–Ω—è
  - –ú–µ—Ç–∞–¥–∞–Ω—ñ –≤–∫–ª—é—á–∞—é—Ç—å:
    - `name`: –Ω–∞–∑–≤–∞ –∫–∞—Ä—Ç–∏
    - `type`: major/minor
    - `suit`: –º–∞—Å—Ç—å –∞–±–æ NA –¥–ª—è —Å—Ç–∞—Ä—à–∏—Ö –∞—Ä–∫–∞–Ω—ñ–≤
    - `aspect`: upright/reversed (–¥–ª—è —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤)
- **–†–æ–∑–ø–æ–¥—ñ–ª**:
  - –°—Ç–∞—Ä—à—ñ –ê—Ä–∫–∞–Ω–∏: 66 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ (22 –∫–∞—Ä—Ç–∏ √ó 3)
  - –ú–æ–ª–æ–¥—à—ñ –ê—Ä–∫–∞–Ω–∏: 168 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ (56 –∫–∞—Ä—Ç √ó 3)

### LangChain –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

1. **ChatOpenAI**
   - –ú–æ–¥–µ–ª—å: gpt-4-turbo-preview
   - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 0.7
     - –ö–æ–Ω—Ç—Ä–æ–ª—é—î –∫—Ä–µ–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –≤–∏–ø–∞–¥–∫–æ–≤—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
     - 0.0: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω—ñ, –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
     - 1.0: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ñ, —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
     - 0.7: –∑–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è —Ç–∞—Ä–æ–ª–æ–≥—ñ—á–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ–π
       - –î–æ—Å—Ç–∞—Ç–Ω—å–æ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—ñ –¥–ª—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö —á–∏—Ç–∞–Ω—å
       - –ó–±–µ—Ä—ñ–≥–∞—î –∑–≤'—è–∑–æ–∫ –∑ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ –∫–∞—Ä—Ç
       - –î–æ–∑–≤–æ–ª—è—î –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—ó –ø—ñ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–∏—Ç–∞–Ω–Ω—è
       - –ó–∞–±–µ–∑–ø–µ—á—É—î —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö –∑–∞–ø–∏—Ç–∞—Ö

2. **Retrieval Chain**
   - –¢–∏–ø –ø–æ—à—É–∫—É: similarity
   - K –Ω–∞–π–±–ª–∏–∂—á–∏—Ö —Å—É—Å—ñ–¥—ñ–≤: 5

3. **Prompt Template**
   - –°–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ç–∞—Ä–æ–ª–æ–≥–∞
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∫–∞—Ä—Ç
   - –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –º–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

### Frontend –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω
- –†–æ–∑–º—ñ—Ä–∏ –∫–∞—Ä—Ç:
  - –î–µ—Å–∫—Ç–æ–ø: 300px
  - –ü–ª–∞–Ω—à–µ—Ç: 240px
  - –ú–æ–±—ñ–ª—å–Ω–∏–π: 180px
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∏—Ö –∫–∞—Ä—Ç
- –®—Ä–∏—Ñ—Ç–∏: Playfair Display, Cormorant Garamond

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –°–ø–æ—Å—Ç–µ—Ä–µ–∂—É–≤–∞–Ω—ñ—Å—Ç—å (Observability)

–°–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î LangSmith, —Ç–∞ Phoenix –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥–æ–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ –≤ `.env` —Ñ–∞–π–ª:
```bash
LANGCHAIN_API_KEY=your_api_key
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
LANGCHAIN_PROJECT=tarot-agent
LANGCHAIN_TRACING_V2=true
```

### –û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏

1. **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**
   - –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
   - –ß–∞—Å –ø–æ—à—É–∫—É –≤ –≤–µ–∫—Ç–æ—Ä–Ω—ñ–π –±–∞–∑—ñ
   - –ß–∞—Å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π LLM
   - –ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—É

2. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤**
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–∫–µ–Ω—ñ–≤ (prompt/completion)
   - –í–∞—Ä—Ç—ñ—Å—Ç—å API –≤–∏–∫–ª–∏–∫—ñ–≤
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏—Ö –∫–∞—Ä—Ç

3. **–Ø–∫—ñ—Å—Ç—å —Ç–∞ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å**
   - –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π
   - –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
   - –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ –ø–æ–º–∏–ª–æ–∫
   - –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤—ñ–¥–º–æ–≤

### –ü—Ä–∏–∫–ª–∞–¥ –º–µ—Ç—Ä–∏–∫ —Å–µ—Å—ñ—ó

```
üìä –†–ï–ó–Æ–ú–ï TRACE
==================================================
üéØ –ó–∞–ø–∏—Ç: –©–æ –º–µ–Ω–µ —á–µ–∫–∞—î –≤ —Ä–æ–±–æ—Ç—ñ?
‚úÖ –£—Å–ø—ñ—Ö: –¢–∞–∫

‚è±Ô∏è –ß–ê–° –í–ò–ö–û–ù–ê–ù–ù–Ø:
   üîç –ü–æ—à—É–∫ –≤ –±–∞–∑—ñ: 0.234—Å
   ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è LLM: 2.156—Å
   üìä –ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å: 2.390—Å

üí∞ –í–ê–†–¢–Ü–°–¢–¨:
   üíµ –û—Ü—ñ–Ω–µ–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: $0.0234
   üìù Prompt —Ç–æ–∫–µ–Ω–∏: 1250
   üé≠ Completion —Ç–æ–∫–µ–Ω–∏: 450
   üìä –í—Å—å–æ–≥–æ —Ç–æ–∫–µ–Ω—ñ–≤: 1700

üé¥ –ö–û–ù–¢–ï–ö–°–¢:
   üÉè –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Ä—Ç: 3
   üìÑ –ó–Ω–∞–π–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤: 15
   ü§ñ –ú–æ–¥–µ–ª—å: gpt-4-turbo-preview
==================================================
```

### –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑

LangSmith –Ω–∞–¥–∞—î –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è:
- –ü–µ—Ä–µ–≥–ª—è–¥—É —ñ—Å—Ç–æ—Ä—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤
- –ê–Ω–∞–ª—ñ–∑—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –≤–∏—Ç—Ä–∞—Ç
- –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

![LangSmith Dashboard](app/static/images/langsmith.png)

## –û–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

1. **–í–µ–∫—Ç–æ—Ä–Ω–∞ –±–∞–∑–∞**
   - –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
   - –ù–µ –≤–∫–ª—é—á–µ–Ω–∞ –≤ git —á–µ—Ä–µ–∑ —Ä–æ–∑–º—ñ—Ä
   - **–ü–æ—Ç—Ä–µ–±—É—î —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É**

2. **API –∫–ª—é—á—ñ**
   - –ü–æ—Ç—Ä—ñ–±–µ–Ω OpenAI API –∫–ª—é—á
   - –ü–æ—Ç—Ä—ñ–±–µ–Ω LangSmith API –∫–ª—é—á
   - –ó–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ .env —Ñ–∞–π–ª—ñ

3. **–†–µ—Å—É—Ä—Å–∏**
   - –ü–æ—Ç—Ä–µ–±—É—î ~1GB –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ—ó –±–∞–∑–∏
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î GPU –¥–ª—è –µ–º–±–µ–¥—ñ–Ω–≥—ñ–≤ (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–æ)
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤
